{% extends "layout.html" %}

{% block title %}
    {{ lesson_name }} {% if slide_order %}- Slide {{ slide_order }}{% endif %}
{% endblock %}

{% block head %}
    {{ super() }}
    <link rel="stylesheet" href="{{ url_for('static', filename='css/quiz.css') }}">
{% endblock %}

{% block main %}
    {% if error %}
        <div class="alert alert-danger" role="alert">
            {{ error }}
        </div>
    {% else %}
        {# Add data attributes for quiz functionality #}
        <div class="container" data-lesson-id="{{ lesson_id }}" data-total-slides="{{ total_slides }}" data-user-id="{{ session['user_id'] }}">
            <h1 class="text-center mb-4">{{ lesson_name }}</h1>
            
            {# Add slides-container class #}
            <div class="slides-container">
                <div id="slideContent" class="slide active" data-slide-order="{{ slide_order }}">
                    {{ slide.content|safe }}
                </div>
            </div>
            
            <div class="navigation-controls text-center">
                <button id="prevSlide" class="btn btn-primary" {% if slide_order <= 1 %}disabled{% endif %}>
                    Previous
                </button>
                
                <span id="slideNumber" class="mx-3">
                    Slide {{ slide_order }} of {{ total_slides }}
                </span>
                
                <button id="nextSlide" class="btn btn-primary" {% if slide_order >= total_slides %}disabled{% endif %}>
                    Next
                </button>
            </div>
        </div>

        {% block scripts %}
            <script>
                // Pass data from Flask to JavaScript
                window.lessonData = {
                    lessonId: {{ lesson_id }},
                    currentSlide: {{ slide_order }},
                    totalSlides: {{ total_slides }}
                };
            </script>
            <script src="{{ url_for('static', filename='js/scripts.js') }}"></script>
            <script src="{{ url_for('static', filename='js/quiz.js') }}"></script>
        {% endblock %}
    {% endif %}
{% endblock %}